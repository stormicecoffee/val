<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will you be my Valentine Anu? üíï</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Quicksand', sans-serif;
        }

        #root {
            width: 100%;
            height: 100%;
        }

        .heart {
            position: absolute;
            font-size: 30px;
            animation: float 4s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .title-font {
            font-family: 'Pacifico', cursive;
        }

        @keyframes pulse-heart {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pulse-heart {
            animation: pulse-heart 1s ease-in-out infinite;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .confetti {
            position: absolute;
            font-size: 24px;
            animation: confetti-fall 3s linear forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Heart Icon Component
        const HeartIcon = ({ className }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                className={className}
            >
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        );

        // Floating Hearts Background
        const FloatingHearts = () => {
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üíò'];
            const positions = [
                { left: '10%', top: '15%', delay: '0s' },
                { left: '20%', top: '60%', delay: '1s' },
                { left: '80%', top: '25%', delay: '2s' },
                { left: '70%', top: '70%', delay: '0.5s' },
                { left: '30%', top: '30%', delay: '1.5s' },
                { left: '85%', top: '80%', delay: '2.5s' },
                { left: '15%', top: '85%', delay: '3s' },
                { left: '60%', top: '40%', delay: '1.8s' },
            ];

            return (
                <>
                    {positions.map((pos, i) => (
                        <div
                            key={i}
                            className="heart"
                            style={{
                                left: pos.left,
                                top: pos.top,
                                animationDelay: pos.delay,
                            }}
                        >
                            {hearts[i % hearts.length]}
                        </div>
                    ))}
                </>
            );
        };

        // Confetti Component
        const Confetti = () => {
            const emojis = ['üíñ', '‚ú®', 'üíï', 'üå∏', 'üíù', 'üéÄ', 'üå∫', 'üíê'];
            const [confettiPieces, setConfettiPieces] = useState([]);

            useEffect(() => {
                const pieces = Array.from({ length: 30 }, (_, i) => ({
                    id: i,
                    emoji: emojis[Math.floor(Math.random() * emojis.length)],
                    left: Math.random() * 100,
                    delay: Math.random() * 0.5,
                }));
                setConfettiPieces(pieces);
            }, []);

            return (
                <>
                    {confettiPieces.map(piece => (
                        <div
                            key={piece.id}
                            className="confetti"
                            style={{
                                left: `${piece.left}%`,
                                animationDelay: `${piece.delay}s`,
                            }}
                        >
                            {piece.emoji}
                        </div>
                    ))}
                </>
            );
        };

        function App() {
            const [answered, setAnswered] = useState(false);
            const [noPosition, setNoPosition] = useState({ x: 200, y: 0 });
            const [isNoInitialized, setIsNoInitialized] = useState(false);
            const [showConfetti, setShowConfetti] = useState(false);
            const noButtonRef = useRef(null);
            const contentRef = useRef(null);
            const buttonContainerRef = useRef(null);

            useEffect(() => {
                const initPosition = () => {
                    if (contentRef.current && buttonContainerRef.current && noButtonRef.current) {
                        const contentRect = contentRef.current.getBoundingClientRect();
                        const buttonContainerRect = buttonContainerRef.current.getBoundingClientRect();

                        const yesButton = buttonContainerRef.current.querySelector('button');
                        if (!yesButton) return;

                        const yesButtonRect = yesButton.getBoundingClientRect();
                        const containerOffsetY = buttonContainerRect.top - contentRect.top;
                        const yesButtonRelativeLeft = yesButtonRect.left - contentRect.left;
                        const startX = yesButtonRelativeLeft + yesButtonRect.width + 20;

                        setNoPosition({ x: startX, y: containerOffsetY });
                        setIsNoInitialized(true);
                    }
                };

                if (!isNoInitialized) {
                    setTimeout(initPosition, 100);
                }
            }, [isNoInitialized]);

            const handleMouseMove = (e) => {
                if (!noButtonRef.current || !contentRef.current || !isNoInitialized || answered) return;

                const buttonRect = noButtonRef.current.getBoundingClientRect();
                const contentRect = contentRef.current.getBoundingClientRect();

                const mouseX = e.clientX - contentRect.left;
                const mouseY = e.clientY - contentRect.top;

                const buttonCenterX = noPosition.x + buttonRect.width / 2;
                const buttonCenterY = noPosition.y + buttonRect.height / 2;

                const distanceX = mouseX - buttonCenterX;
                const distanceY = mouseY - buttonCenterY;
                const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

                const detectionRange = 150;
                if (distance < detectionRange) {
                    const angle = Math.atan2(distanceY, distanceX);
                    let escapeDistance = Math.max(50, 120 - distance);

                    const padding = 15;
                    const maxX = contentRect.width - buttonRect.width - padding;
                    const maxY = contentRect.height - buttonRect.height - padding;

                    const nearLeftEdge = noPosition.x < padding + 50;
                    const nearRightEdge = noPosition.x > maxX - 50;
                    const nearTopEdge = noPosition.y < padding + 50;
                    const nearBottomEdge = noPosition.y > maxY - 50;

                    if ((nearLeftEdge || nearRightEdge) && (nearTopEdge || nearBottomEdge)) {
                        escapeDistance *= 1.5;
                    }

                    let newX = buttonCenterX - Math.cos(angle) * escapeDistance - buttonRect.width / 2;
                    let newY = buttonCenterY - Math.sin(angle) * escapeDistance - buttonRect.height / 2;

                    if (newX < padding) {
                        newX = Math.min(maxX, contentRect.width / 2 + 100);
                    } else if (newX > maxX) {
                        newX = Math.max(padding, contentRect.width / 2 - 100);
                    }

                    if (newY < padding) {
                        newY = Math.min(maxY, contentRect.height / 2 + 50);
                    } else if (newY > maxY) {
                        newY = Math.max(padding, contentRect.height / 2 - 50);
                    }

                    newX = Math.max(padding, Math.min(newX, maxX));
                    newY = Math.max(padding, Math.min(newY, maxY));

                    setNoPosition({ x: newX, y: newY });
                }
            };

            const handleYes = () => {
                setAnswered(true);
                setShowConfetti(true);
            };

            if (answered) {
                return (
                    <div className="relative w-full h-full bg-gradient-to-br from-pink-100 via-purple-100 to-pink-200 flex items-center justify-center overflow-hidden">
                        <FloatingHearts />
                        {showConfetti && <Confetti />}
                        <div className="text-center z-10 animate-bounce">
                            <div className="pulse-heart inline-block mb-6">
                                <HeartIcon className="w-32 h-32 text-pink-500" />
                            </div>
                            <h1 className="title-font text-6xl text-pink-600 mb-4">Yay! Bubba is super happy üíï</h1>
                            <p className="text-2xl text-purple-600 font-semibold">I knew you'd say yes!</p>
                        </div>
                    </div>
                );
            }

            return (
                <div
                    className="relative w-full h-full bg-gradient-to-br from-pink-100 via-purple-100 to-pink-200"
                    onMouseMove={handleMouseMove}
                    style={{ overflow: 'hidden' }}
                >
                    <FloatingHearts />

                    <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div ref={contentRef} className="relative max-w-2xl w-full px-8 pointer-events-auto">
                            <div className="text-center">
                                <div className="pulse-heart inline-block mb-8">
                                    <HeartIcon className="w-24 h-24 text-pink-500" />
                                </div>

                                <h1 className="title-font text-5xl md:text-6xl text-pink-600 mb-6">
                                    Will you be my Valentine Anu?
                                </h1>

                                <p className="text-xl text-purple-600 mb-12 font-semibold">
                                    Please say yes! ü•∫üíï
                                </p>

                                <div ref={buttonContainerRef} className="flex justify-center gap-5">
                                    <button
                                        onClick={handleYes}
                                        className="bg-gradient-to-r from-pink-400 to-pink-600 hover:from-pink-500 hover:to-pink-700 text-white font-bold py-4 px-12 rounded-full transition-all duration-200 transform hover:scale-110 shadow-lg text-xl"
                                    >
                                        Yes! üíñ
                                    </button>
                                    {/* Invisible placeholder */}
                                    <div style={{ width: '140px', height: '56px', opacity: 0 }}></div>
                                </div>

                            </div>

                            {/* No button - evasive */}
                            <button
                                ref={noButtonRef}
                                onClick={() => alert('Aww, come on! Give it another try! ü•∫üíï')}
                                className="absolute bg-gradient-to-r from-purple-300 to-purple-400 hover:from-purple-400 hover:to-purple-500 text-white font-bold py-4 px-12 rounded-full shadow-lg text-xl z-50"
                                style={{
                                    left: `${noPosition.x}px`,
                                    top: `${noPosition.y}px`,
                                    transition: 'all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1)',
                                }}
                            >
                                No üò¢
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
